"use strict";(self.webpackChunktemachtiani=self.webpackChunktemachtiani||[]).push([[396],{27619:function(e,t,n){n.d(t,{Qo:function(){return g},if:function(){return d},oN:function(){return x}});var a=n(74165),r=n(15861),c=n(31243),i=n(49813),s=n(89704),o=n.n(s),u="https://api.revistatemachtiani.net",l="C4CF1629D81577CF",d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/registers?filters[email][$eq]=").concat(t)).then((function(e){if(0!=e.data.data.length){(0,i.Wi)("Email valido");var c=function(){var c=(0,r.Z)((0,a.Z)().mark((function r(){var c;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m(t);case 2:if(!a.sent){a.next=6;break}h(e.data.data,t,n,e.data.data[0].id),a.next=8;break;case 6:c=p(),f(t,c,n,e.data.data[0].id);case 8:case"end":return a.stop()}}),r)})));return function(){return c.apply(this,arguments)}}();c()}else(0,i.zR)("Email invalido")})).catch((function(){(0,i.zR)("Email invalido")}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){return Math.floor(9e4*Math.random())+1e4},f=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n,r,i){var s,o,l,d,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:return s=e.sent,o={data:{email:t,code:n}},e.next=6,c.Z.post("".concat(u,"/api/verify-codes"),o);case 6:v(t,"Este es un c\xf3digo de verificaci\xf3n de temachtiani",n),l=g(n),d=g(i),p=g(s),l=l.replace(/\//g,"_"),d=d.replace(/\//g,"_"),p=p.replace(/\//g,"_"),r("/verification-code/".concat(l,"/").concat(d,"/").concat(p));case 14:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("".concat(u,"/api/verify-codes?filters[email][$eq]=").concat(t));case 3:if(0==e.sent.data.data.length){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n,r){var i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof r){e.next=7;break}return i=r.toString(),s={to:t,subject:n,text:i},e.next=5,c.Z.post("".concat(u,"/api/email"),s).then((function(e){})).catch((function(e){}));case 5:e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n,r,i){var s,o,l,d,f,m,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/verify-codes?filters[email][$eq]=").concat(n));case 2:return s=e.sent,e.next=5,b(n);case 5:return o=e.sent,l=p(),d={data:{code:l}},e.next=10,c.Z.put("".concat(u,"/api/verify-codes/").concat(s.data.data[0].id),d);case 10:v(n,"Este es un c\xf3digo de verificaci\xf3n de temachtiani",l),f=(f=g(l)).replace(/\//g,"_"),m=(m=g(i)).replace(/\//g,"_"),h=(h=g(o)).replace(/\//g,"_"),r("/verification-code/".concat(f,"/").concat(m,"/").concat(h));case 18:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),g=function(e){return o().AES.encrypt(e.toString(),l).toString()},x=function(e){return o().AES.decrypt(e,l,{iv:o().enc.Hex.parse("a0d5ebe6a0d5ebe6a0d5ebe6a0d5ebe6")}).toString(o().enc.Utf8)},b=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/users?filters[email][$eq]=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data[0].id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},73396:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(93433),r=n(29439),c=n(72791),i=(n(85700),n(8728)),s=n(95854);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}var u={defaultProps:{__TYPE:"Steps",id:null,model:null,activeIndex:0,readOnly:!0,style:null,className:null,onSelect:null,children:void 0},getProps:function(e){return s.gb.getMergedProps(e,u.defaultProps)},getOtherProps:function(e){return s.gb.getDiffProps(e,u.defaultProps)}},l=c.memo(c.forwardRef((function(e,t){var n=u.getProps(e),a=c.useRef(null),r=function(e,t,a){n.readOnly||t.disabled?e.preventDefault():(n.onSelect&&n.onSelect({originalEvent:e,item:t,index:a}),t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t,index:a}))},i=function(e,t){if(!1===e.visible)return null;var a=e.label+"_"+t,i=t===n.activeIndex,o=e.disabled||t!==n.activeIndex&&n.readOnly,u=o?-1:"",l=(0,s.AK)("p-steps-item",e.className,{"p-highlight p-steps-current":i,"p-disabled":o}),d=(0,s.AK)("p-menuitem-icon",e.icon),p=s.Cz.getJSXIcon(e.icon,{className:"p-menuitem-icon"},{props:n}),f=e.label&&c.createElement("span",{className:"p-steps-title"},e.label),m=c.createElement("a",{href:e.url||"#",className:"p-menuitem-link",role:"presentation",target:e.target,onClick:function(n){return r(n,e,t)},tabIndex:u},c.createElement("span",{className:"p-steps-number"},t+1),p,f);if(e.template){var v={onClick:function(n){return r(n,e,t)},className:"p-menuitem-link",labelClassName:"p-steps-title",numberClassName:"p-steps-number",iconClassName:d,element:m,props:n,tabIndex:u,active:i,disabled:o};m=s.gb.getJSXElement(e.template,e,v)}return c.createElement("li",{key:a,id:e.id,className:l,style:e.style,role:"tab","aria-selected":i,"aria-expanded":i},m)};c.useImperativeHandle(t,(function(){return{props:n,getElement:function(){return a.current}}}));var l=u.getOtherProps(n),d=(0,s.AK)("p-steps p-component",{"p-readonly":n.readOnly},n.className),p=function(){if(n.model){var e=n.model.map(i);return c.createElement("ul",{role:"tablist"},e)}return null}();return c.createElement("div",o({id:n.id,ref:a,className:d,style:n.style},l),p)})));l.displayName="Steps";var d=n(80184),p=function(e){var t=e.estatus,n=void 0===t?0:t,a=(0,c.useState)("---------"),i=(0,r.Z)(a,2),s=i[0],o=i[1],u=(0,c.useState)(n),p=(0,r.Z)(u,2),f=p[0],m=p[1];(0,c.useEffect)((function(){1===n||2===n?m(n):3===n?(o("Rechazado"),m(n)):4===n?(o("Aceptado con correcciones menores"),m(3)):5===n?(o("Aceptado con correcciones mayores"),m(3)):6===n?(o("Aceptado"),m(3)):7===n&&m(4)}),[n]);var v=[{id:0,label:"Pendiente"},{id:1,label:"Evaluando"},{id:2,label:"Dictaminado"},{id:3,label:s},{id:4,label:"Publicado"}];return(0,d.jsx)("div",{className:"Steps_",children:(0,d.jsx)(l,{model:v,activeIndex:f})})},f=n(22664),m=n(57689),v=n(74165),h=n(15861),g=n(31243),x=n(27619),b="https://api.revistatemachtiani.net",Z=function(){var e=(0,h.Z)((0,v.Z)().mark((function e(t,n,a){var r,c;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(r=t).replace(/_/g,"/"),r=(0,x.oN)(r),c="",e.next=6,g.Z.get("".concat(b,"/api/articles/").concat(r)).then((function(e){n(e.data.data.attributes.dataArticle),c=e.data.data.attributes.idUser})).catch((function(e){console.log(e)}));case 6:return e.next=8,g.Z.get("".concat(b,"/api/users/").concat(c,"?populate=*")).then((function(e){a(e.data.register.institute)})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),y=function(){var e=(0,c.useState)(),t=(0,r.Z)(e,2),n=t[0],s=t[1],o=(0,c.useState)(),u=(0,r.Z)(o,2),l=u[0],v=u[1],h=(0,c.useState)(),g=(0,r.Z)(h,2),x=g[0],b=g[1],y=(0,m.UO)(),k=y.id,S=y.idUser;(0,c.useEffect)((function(){Z(k,s,v)}),[]),(0,c.useEffect)((function(){if(null!==n&&void 0!==n&&n.stakingInputData){var e=[];n.stakingInputData.map((function(t,n){(e=(0,a.Z)(e)).push(t["nameStaking".concat(n)].value+" "+t["lastName".concat(n)].value)})),w(e)}}),[n]);var j=(0,c.useState)([]),E=(0,r.Z)(j,2),N=E[0],w=E[1];return(0,c.useEffect)((function(){var e=[],t=[];if(null!==n&&void 0!==n&&n.stakingInputData){e.push(l),n.stakingInputData.map((function(t,n){e.push(t["Instituci\xf3n".concat(n)].value)}));for(var a=0;a<e.length;a++)-1===t.indexOf(e[a])&&t.push(e[a]);b(t)}}),[l]),(0,d.jsxs)("div",{className:"dark:bg-gray-600 bg-white dark:text-white LineTime",children:[(0,d.jsx)(f.Z,{className:"_back_",url:"/user/dashboard/".concat(S)}),(0,d.jsx)(i.h4,{title:"Etapas de mi art\xedculo"}),(0,d.jsx)("div",{className:"cnt_steps bg-slate-100 dark:bg-gray-500",children:(0,d.jsx)(p,{estatus:null===n||void 0===n?void 0:n.estatus})}),(0,d.jsxs)("div",{className:"description_s",children:[(0,d.jsx)("h1",{className:"title_descrip",children:null===n||void 0===n?void 0:n.name}),(0,d.jsxs)("h2",{children:[(0,d.jsx)("span",{style:{fontSize:"18px",fontWeight:"bold"},children:"Autor(es):"})," ",(0,d.jsxs)("span",{style:{fontSize:"18px"},children:[N?(null===n||void 0===n?void 0:n.autor)+", ":null===n||void 0===n?void 0:n.autor," ",N?N.map((function(e,t){return(0,d.jsx)(d.Fragment,{children:t==N.length-1?e:e+", "})})):""]})]}),(0,d.jsxs)("h2",{children:[(0,d.jsx)("span",{style:{fontSize:"18px",fontWeight:"bold"},children:"Instituci\xf3n:"})," ",(0,d.jsxs)("span",{style:{fontSize:"18px"},children:[" ",x?x.map((function(e,t){return(0,d.jsx)(d.Fragment,{children:t==x.length-1?e:e+", "})})):""]})]}),(0,d.jsxs)("div",{className:"block_descrip",children:[(0,d.jsx)("h2",{children:"Resumen"}),(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:null===n||void 0===n?void 0:n.resume}})]})]})]})}}}]);
//# sourceMappingURL=396.37040596.chunk.js.map