(self.webpackChunktemachtiani=self.webpackChunktemachtiani||[]).push([[14],{27619:function(e,t,n){"use strict";n.d(t,{Qo:function(){return Z},if:function(){return f},oN:function(){return x}});var r=n(74165),a=n(15861),c=n(31243),i=n(53439),o=n(89704),s=n.n(o),u="https://api.revistatemachtiani.net",d="C4CF1629D81577CF",f=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/registers?filters[email][$eq]=").concat(t)).then((function(e){if(0!=e.data.data.length){(0,i.Wi)("Email valido");var c=function(){var c=(0,a.Z)((0,r.Z)().mark((function a(){var c;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v(t);case 2:if(!r.sent){r.next=6;break}h(e.data.data,t,n,e.data.data[0].id),r.next=8;break;case 6:c=l(),p(t,c,n,e.data.data[0].id);case 8:case"end":return r.stop()}}),a)})));return function(){return c.apply(this,arguments)}}();c()}else(0,i.zR)("Email invalido")})).catch((function(){(0,i.zR)("Email invalido")}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){return Math.floor(9e4*Math.random())+1e4},p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,i){var o,s,d,f,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:return o=e.sent,console.log("idUsers",o),s={data:{email:t,code:n}},e.next=7,c.Z.post("".concat(u,"/api/verify-codes"),s);case 7:g(t,"Este es un c\xf3digo de verificaci\xf3n de temachtiani",n),d=Z(n),f=Z(i),l=Z(o),d=d.replace(/\//g,"_"),f=f.replace(/\//g,"_"),l=l.replace(/\//g,"_"),a("/verification-code/".concat(d,"/").concat(f,"/").concat(l));case 15:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("".concat(u,"/api/verify-codes?filters[email][$eq]=").concat(t));case 3:if(0==(n=e.sent).data.data.length){e.next=9;break}return console.log("true",n.data.data),e.abrupt("return",!0);case 9:return console.log("false",n.data.data),e.abrupt("return",!1);case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.log("error en find email",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a){var i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof a){e.next=8;break}return i=a.toString(),o={to:t,subject:n,text:i},console.log("codestring",i),e.next=6,c.Z.post("".concat(u,"/api/email"),o).then((function(e){console.log("entro")})).catch((function(e){console.log("fallo")}));case 6:e.next=8;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,i){var o,s,f,p,v,h,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/verify-codes?filters[email][$eq]=").concat(n));case 2:return o=e.sent,e.next=5,m(n);case 5:return s=e.sent,console.log("idUsers",s),f=l(),p={data:{code:f}},e.next=11,c.Z.put("".concat(u,"/api/verify-codes/").concat(o.data.data[0].id),p);case 11:g(n,"Este es un c\xf3digo de verificaci\xf3n de temachtiani",f),console.log("newCode",f.toString()),console.log("key",d),v=(v=Z(f)).replace(/\//g,"_"),h=(h=Z(i)).replace(/\//g,"_"),x=(x=Z(s)).replace(/\//g,"_"),a("/verification-code/".concat(v,"/").concat(h,"/").concat(x));case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Z=function(e){return s().AES.encrypt(e.toString(),d).toString()},x=function(e){return s().AES.decrypt(e,d,{iv:s().enc.Hex.parse("a0d5ebe6a0d5ebe6a0d5ebe6a0d5ebe6")}).toString(s().enc.Utf8)},m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/users?filters[email][$eq]=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data[0].id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},39873:function(e,t,n){"use strict";n.r(t);var r=n(29439),a=n(72791),c=(n(12317),n(19952)),i=(n(89704),n(58815)),o=n(57689),s=n(27619),u=n(80184);t.default=function(){var e=(0,o.UO)(),t=e.code,n=e.id,d=e.idUser,f=t;f=f.replace(/_/g,"/"),f=(0,s.oN)(f);var l=(0,a.useState)(f),p=(0,r.Z)(l,2),v=p[0];p[1];return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"VerificationCode",children:(0,u.jsx)(c.Z,{className:"inside_verificationCode",logo:!0,title:"C\xf3digo de recuperaci\xf3n",subTitle:"Ingresa el c\xf3digo enviado",children:(0,u.jsx)("div",{className:"inputContainer",children:(0,u.jsx)(i.Z,{codeApi:v,idencript:n,idUser:d})})})})})}},42480:function(){}}]);
//# sourceMappingURL=14.6903fb70.chunk.js.map