"use strict";(self.webpackChunktemachtiani=self.webpackChunktemachtiani||[]).push([[525],{59243:function(e,t,a){a.d(t,{Z:function(){return n}});a(72791);var r=a(80184),n=function(e){var t=e.className;return(0,r.jsx)("div",{className:"cnt_loading ".concat(t),children:(0,r.jsx)("div",{className:"AnimationLoading border-solid border-t-[2px] border-green-700 dark:border-white"})})}},22525:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var r=a(74165),n=a(15861),s=a(29439),i=a(72791),c=(a(25704),a(19952)),o=a(8728),u=a(57689),l=a(11087),d=a(39304),p=(a(76020),a(22664)),m=a(31243),f=a(49813),h=a(89704),v=a.n(h),x=a(35407),g="C4CF1629D81577CF",b=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,a,n){var s,i,c,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}return e.prev=1,e.next=4,m.Z.post("https://api.revistatemachtiani.net/api/auth/local",t);case 4:if(s=e.sent,i=(0,x.o)(s.data.user.accounttype),c=(0,x.Q)(s.data.user.id),!0!==s.data.user.confirmed||"876966"!==i){e.next=15;break}return a(s.data),localStorage.setItem("token",s.data.jwt),localStorage.setItem("userWeb",s.data.user.username),localStorage.setItem("jeyaiodl",c),o=j(s.data.user.id),localStorage.setItem("ref",o),e.abrupt("return",{status:200,dtasEncrypt:o,id:s.data.user.id});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,a,r){return e.apply(this,arguments)}}(),j=function(e){var t=v().AES.encrypt(e.toString(),g).toString();return t=t.replace(/\//g,"_")},y=a(59243),w=a(97330),k=a(54270),S=a(80184),C=function(){var e=(0,u.s0)(),t=(0,i.useState)(!1),a=(0,s.Z)(t,2),m=a[0],h=a[1],v=(0,i.useState)({identifier:{value:null,validationType:"empty"},password:{value:null,validationType:"empty"}}),x=(0,s.Z)(v,2),g=x[0],j=x[1];(0,i.useEffect)((function(){for(var e in g)document.getElementById(e)&&(0,d.yt)(e,g)}),[g]);var C=function(){var t=(0,n.Z)((0,r.Z)().mark((function t(a){var n,s,i,c,o,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),(0,d.DD)(g,j)){t.next=3;break}return t.abrupt("return");case 3:return h(!0),n={identifier:g.identifier.value,password:g.password.value},t.prev=5,t.next=8,b(n,e);case 8:if(200!==(s=t.sent).status){t.next=21;break}return i=s.id,t.next=13,(0,w.n)("/api/users/".concat(i,"?populate=register"));case 13:c=t.sent,o=c.register,u={name:o.names+" "+o.lastName,email:o.email,letter:o.names.charAt(0)},(0,f.Wi)("Credenciales correctas"),localStorage.setItem("userDatasW",JSON.stringify(u)),setTimeout((function(){window.location.replace("/user/dashboard/".concat(s.dtasEncrypt))}),3500),t.next=22;break;case 21:"ApplicationError"===s.response.data.error.name?((0,f.nv)("Para iniciar sesi\xf3n, necesitamos que confirmes tu cuenta."," Por favor, sigue las instrucciones en tu correo electr\xf3nico para completar el proceso de autenticaci\xf3n. Si necesitas ayuda, cont\xe1ctanos. \xa1Gracias!"),h(!1)):"ValidationError"===s.response.data.error.name&&((0,f.zR)("Credenciales incorrectas"),h(!1));case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(5),console.log(t.t0);case 27:case"end":return t.stop()}}),t,null,[[5,24]])})));return function(e){return t.apply(this,arguments)}}();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(k.q,{children:[(0,S.jsx)("meta",{charSet:"utf-8"}),(0,S.jsx)("title",{children:"Revista Temachtiani"})]}),(0,S.jsxs)("div",{className:"Login",children:[(0,S.jsx)(p.Z,{className:"back",url:"/"}),(0,S.jsx)("form",{onSubmit:C,className:"form_class",children:(0,S.jsxs)(c.Z,{title:"Inicio de sesi\xf3n",subTitle:"Ingresar aqu\xed",children:[(0,S.jsxs)("div",{className:"inputs-container",children:[(0,S.jsx)(o.II,{title:"Usuario",placeholder:"Usuario",id:"identifier",onChange:function(e){(0,d.yS)(e,"identifier",g,j)}}),(0,S.jsx)(o.CM,{title:"Contrase\xf1a",placeholder:"Contrase\xf1a",id:"password",onChange:function(e){(0,d.yS)(e,"password",g,j)}})]}),(0,S.jsx)(l.OL,{to:"/recover-account",children:(0,S.jsx)("div",{className:"rememberPassword",children:"Olvid\xe9 mi contrase\xf1a"})}),m?(0,S.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,S.jsx)(y.Z,{})}):(0,S.jsx)(o.zx,{type:"submit",className:"btn_primary",title:"Iniciar sesi\xf3n"}),(0,S.jsx)(l.OL,{to:"/log",children:(0,S.jsx)("div",{className:"register",children:"Aun no tengo una cuenta"})})]})})]})]})}}}]);
//# sourceMappingURL=525.ed24e84a.chunk.js.map