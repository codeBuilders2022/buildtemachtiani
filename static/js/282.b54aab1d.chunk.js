"use strict";(self.webpackChunktemachtiani=self.webpackChunktemachtiani||[]).push([[282],{30459:function(e,t,n){n.d(t,{Hk:function(){return c},TK:function(){return o},i6:function(){return i}});var a=n(74165),r=n(15861),l=n(31243),c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://api.revistatemachtiani.net",e.next=4,l.Z.post("".concat("https://api.revistatemachtiani.net").concat(t),n);case 4:return r=e.sent,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://api.revistatemachtiani.net",e.next=4,l.Z.post("".concat("https://api.revistatemachtiani.net").concat(t),n);case 4:return r=e.sent,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.revistatemachtiani.net",e.prev=1,e.next=4,l.Z.get("".concat("https://api.revistatemachtiani.net").concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},96282:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=n(74165),r=n(15861),l=n(1413),c=n(4942),i=n(93433),o=n(29439),u=n(72791),s=(n(56049),n(12653)),m=n(22664),d=n(66571),p=n(38246),f=n(29355),v=n(39304),h=n(53439),b=n(57689),y=n(31243),g=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n,r){var l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={dataArticle:{name:t.name.value,autor:t.autor.value,estatus:0,resume:t.resume.value,interesConflict:t.interesConflict.value,reference:t.reference.value,stakingInputData:n}},(c=new FormData).append("files.word",t.word.value),c.append("data",JSON.stringify(l)),e.next=6,y.Z.post("".concat("https://api.revistatemachtiani.net","/api/articles"),c).then((function(){(0,h.Wi)("Articulo subido")})).catch((function(e){(0,h.zR)("Fallo al subir articulo")}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),x=n(42062),N=n(95854);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j.apply(this,arguments)}function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function Z(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==E(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}function C(e,t,n){return(t=Z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={defaultProps:{__TYPE:"Editor",id:null,value:null,style:null,className:null,placeholder:null,readOnly:!1,modules:null,formats:null,theme:"snow",showHeader:!0,headerTemplate:null,onTextChange:null,onSelectionChange:null,onLoad:null,maxLength:null,children:void 0},getProps:function(e){return N.gb.getMergedProps(e,w.defaultProps)},getOtherProps:function(e){return N.gb.getDiffProps(e,w.defaultProps)}};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(){try{return Quill}catch(e){return null}}(),A=u.memo(u.forwardRef((function(e,t){var a=w.getProps(e),r=u.useRef(null),l=u.useRef(null),c=u.useRef(null),i=u.useRef(null),o=u.useRef(!1);(0,x.nw)((function(){if(!o.current){var e={modules:T({toolbar:!!a.showHeader&&c.current},a.modules),placeholder:a.placeholder,readOnly:a.readOnly,theme:a.theme,formats:a.formats};O?(i.current=new Quill(l.current,e),s(),i.current&&i.current.getModule("toolbar")&&a.onLoad&&a.onLoad(i.current)):n.e(921).then(n.t.bind(n,96921,23)).then((function(t){t&&N.p7.isExist(l.current)&&(t.default?i.current=new t.default(l.current,e):i.current=new t(l.current,e),s())})).then((function(){i.current&&i.current.getModule("toolbar")&&a.onLoad&&a.onLoad(i.current)})),o.current=!0}}));var s=function(){a.value&&i.current.setContents(i.current.clipboard.convert(a.value)),i.current.on("text-change",(function(e,t,n){var r=l.current.children[0],c=r?r.innerHTML:null,o=i.current.getText();if("<p><br></p>"===c&&(c=null),"api"===n){var u=l.current.children[0],s=document.createElement("div");if(s.innerHTML=a.value||"",N.p7.isEqualElement(u,s))return}if(a.maxLength){var m=i.current.getLength();m>a.maxLength&&i.current.deleteText(a.maxLength,m)}a.onTextChange&&a.onTextChange({htmlValue:c,textValue:o,delta:e,source:n})})),i.current.on("selection-change",(function(e,t,n){a.onSelectionChange&&a.onSelectionChange({range:e,oldRange:t,source:n})}))};(0,x.rf)((function(){i.current&&!i.current.hasFocus()&&(a.value?i.current.setContents(i.current.clipboard.convert(a.value)):i.current.setText(""))}),[a.value]),u.useImperativeHandle(t,(function(){return{props:a,getQuill:function(){return i.current},getElement:function(){return r.current},getContent:function(){return l.current},getToolbar:function(){return c.current}}}));var m=w.getOtherProps(a),d=(0,N.AK)("p-component p-editor-container",a.className),p=!1===a.showHeader?null:a.headerTemplate?u.createElement("div",{ref:c,className:"p-editor-toolbar"},a.headerTemplate):u.createElement("div",{ref:c,className:"p-editor-toolbar"},u.createElement("span",{className:"ql-formats"},u.createElement("select",{className:"ql-header",defaultValue:"0"},u.createElement("option",{value:"1"},"Heading"),u.createElement("option",{value:"2"},"Subheading"),u.createElement("option",{value:"0"},"Normal")),u.createElement("select",{className:"ql-font"},u.createElement("option",null),u.createElement("option",{value:"serif"}),u.createElement("option",{value:"monospace"}))),u.createElement("span",{className:"ql-formats"},u.createElement("button",{type:"button",className:"ql-bold","aria-label":"Bold"}),u.createElement("button",{type:"button",className:"ql-italic","aria-label":"Italic"}),u.createElement("button",{type:"button",className:"ql-underline","aria-label":"Underline"})),u.createElement("span",{className:"ql-formats"},u.createElement("select",{className:"ql-color"}),u.createElement("select",{className:"ql-background"})),u.createElement("span",{className:"ql-formats"},u.createElement("button",{type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"}),u.createElement("button",{type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"}),u.createElement("select",{className:"ql-align"},u.createElement("option",{defaultValue:!0}),u.createElement("option",{value:"center"}),u.createElement("option",{value:"right"}),u.createElement("option",{value:"justify"}))),u.createElement("span",{className:"ql-formats"},u.createElement("button",{type:"button",className:"ql-link","aria-label":"Insert Link"}),u.createElement("button",{type:"button",className:"ql-image","aria-label":"Insert Image"}),u.createElement("button",{type:"button",className:"ql-code-block","aria-label":"Insert Code Block"})),u.createElement("span",{className:"ql-formats"},u.createElement("button",{type:"button",className:"ql-clean","aria-label":"Remove Styles"}))),f=u.createElement("div",{ref:l,className:"p-editor-content",style:a.style});return u.createElement("div",j({id:a.id,ref:r,className:d},m),p,f)})));A.displayName="Editor";var I=n(30459),k=n(80184),P=function(){var e=(0,u.useState)(null),t=(0,o.Z)(e,2),n=t[0],y=t[1],x=(0,u.useState)([]),N=(0,o.Z)(x,2),j=N[0],E=N[1],Z=(0,u.useState)(""),C=(0,o.Z)(Z,2),w=(C[0],C[1],(0,u.useState)(0)),S=(0,o.Z)(w,2),T=S[0],O=(S[1],(0,b.s0)()),P=(0,u.useState)({word:{value:null,validationType:"empty"},autor:{value:null,validationType:"empty"},name:{value:null,validationType:"empty"},resume:{value:null,validationType:"empty"},idiom:{value:null,validationType:"empty"},claveWord:{value:null,validationType:"empty"},interesConflict:{value:null,interesConflict:"empty"},reference:{value:null,interesConflict:"empty"}}),q=(0,o.Z)(P,2),R=q[0],L=q[1],W=(0,u.useState)(-1),_=(0,o.Z)(W,2),D=_[0],H=_[1],V=(0,u.useState)([]),z=(0,o.Z)(V,2),B=z[0],F=z[1];(0,u.useEffect)((function(){B.map((function(e,t){for(var n in e)document.getElementById(n)&&(0,v.yt)(n,e)}))}),[B]);var M=(0,u.useState)(null),Q=(0,o.Z)(M,2),K=Q[0],U=Q[1],J=(0,u.useState)(null),Y=(0,o.Z)(J,2),G=Y[0],X=Y[1],$=(0,u.useState)(null),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],ae=(0,u.useState)({textAreaResumeW:!1,textAreaInteresConflictW:!1,textAreaReferenceW:!1}),re=(0,o.Z)(ae,2),le=re[0],ce=re[1];(0,u.useEffect)((function(){if(K){var e=(0,l.Z)({},le);e.textAreaResumeW=!0,ce(e)}if(G){var t=(0,l.Z)({},le);t.textAreaInteresConflictW=!0,ce(t)}if(te){var n=(0,l.Z)({},le);n.textAreaReferenceW=!0,ce(n)}if(1==le.textAreaResumeW&&null==K){var a=(0,l.Z)({},R);a.resume.value="",L(a)}if(1==le.textAreaInteresConflictW&&null==G){var r=(0,l.Z)({},R);r.interesConflict.value="",L(r)}if(1==le.textAreaReferenceW&&null==te){var c=(0,l.Z)({},R);c.reference.value="",L(c)}for(var i in R)document.getElementById(i)&&(0,v.yt)(i,R)}),[R]),(0,u.useEffect)((function(){var e=(0,l.Z)({},R);e.resume.value=K,e.interesConflict.value=G,e.reference.value=te,L(e)}),[K,G,te]),(0,u.useEffect)((function(){var e=(0,l.Z)({},R);e.word.value=n,L(e)}),[n]);(0,u.useEffect)((function(){ie()}),[]);var ie=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.TK)("/api/countries");case 3:t=e.sent,n=t.data,(r=n.map((function(e){return{id:e.id,value:e.attributes.value}}))).sort((function(e,t){return e.value.localeCompare(t.value,void 0,{sensitivity:"base"})})),E(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,h.zR)("\xa1Algo sali\xf3 mal, intentalo m\xe1s tarde!",!0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{className:"CreateArticle",children:(0,k.jsxs)(s.Z,{children:[(0,k.jsx)(m.Z,{className:"_back_",url:"/user/dashboard"}),(0,k.jsx)(d.h4,{title:"Nuevo articulo",button:"Enviar articulo",onClick:function(){(0,v.DD)(R,L)?(0,v.rQ)(B,F)?g(R,B,O):(0,h.zR)("\xa1Ingrese todos los campos requeridos!"):(0,h.zR)("\xa1Ingrese todos los datos del autor!")}}),(0,k.jsxs)(p.Z,{className:"cardInteriorCreateArticle",children:[(0,k.jsxs)("div",{className:"grid-patern-CreateArticle",children:[(0,k.jsxs)("div",{style:{marginBottom:25},children:[(0,k.jsx)(f.Z,{id:"word",setValue:y}),(0,k.jsx)("div",{className:"wordName",children:null===n||void 0===n?void 0:n.name})]}),(0,k.jsx)(d.II,{title:"T\xedtulo del art\xedculo",placeholder:"T\xedtulo del art\xedculo",className:"inputArticleName",id:"name",onChange:function(e){(0,v.yS)(e,"name",R,L)}}),(0,k.jsx)(d.II,{title:"Nombre del autor",placeholder:"Nombre del autor",className:"inputArticleName",id:"autor",onChange:function(e){(0,v.yS)(e,"autor",R,L)}}),(0,k.jsx)(d.Ph,{title:"Idioma",options:[{name:"Espa\xf1ol",value:"es"},{name:"Ingles",value:"en"},{name:"Nauatl",value:"nu"}],value:R.idiom.value,placeholder:"Seleccione el idioma del art\xedculo",className:"selectSize",id:"idiom",onChange:function(e){(0,v.yS)(e,"idiom",R,L)}}),(0,k.jsx)(d.II,{title:"Palabra clave",placeholder:"Palabra clave",className:"inputArticleName",id:"claveWord",onChange:function(e){(0,v.yS)(e,"claveWord",R,L)}}),B.map((function(e,t){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"staking-parent",children:[(0,k.jsxs)("div",{className:"statk_in",children:[(0,k.jsx)(d.II,{title:"Nombre",placeholder:"Nombre",className:"inputArticleName",id:"nameStaking".concat(t),onChange:function(e){(0,v.f2)(e,"nameStaking".concat(t),t,B,F)}}),(0,k.jsx)(d.II,{title:"Apellido",placeholder:"Apellido",className:"inputArticleName",id:"lastName".concat(t),onChange:function(e){(0,v.f2)(e,"lastName".concat(t),t,B,F)}})]}),(0,k.jsxs)("div",{className:"statk_in",children:[(0,k.jsx)(d.II,{title:"Orcid",placeholder:"Orcid",className:"inputArticleName",id:"Orcid".concat(t),onChange:function(e){(0,v.f2)(e,"Orcid".concat(t),t,B,F)}}),(0,k.jsx)(d.II,{title:"Titulo",placeholder:"Titulo",className:"inputArticleName",id:"Titulo".concat(t),onChange:function(e){(0,v.f2)(e,"Titulo".concat(t),t,B,F)}})]}),(0,k.jsxs)("div",{className:"statk_in",children:[(0,k.jsx)(d.II,{title:"Email",placeholder:"Email",className:"inputArticleName",id:"Email".concat(t),onChange:function(e){(0,v.f2)(e,"Email".concat(t),t,B,F)}}),(0,k.jsx)(d.Ph,{title:"Pa\xeds",value:e["pais".concat(t)].value,options:j,placeholder:"Pa\xeds",className:"selectSize",id:"pais".concat(t),onChange:function(e){(0,v.f2)(e,"pais".concat(t),t,B,F)}})]}),(0,k.jsx)("div",{className:"Line_line"})]}),(0,k.jsx)("hr",{className:"hrstaking"})]})})),(0,k.jsx)("div",{className:"new_inputs",children:(0,k.jsx)(d.zx,{className:"buttonStaking btn_primary",title:"A\xf1adir nuevo autor",onClick:function(){return function(){if((0,v.rQ)(B,F)){var e,t=D;t+=1;var n=(0,i.Z)(B);n.push((e={},(0,c.Z)(e,"nameStaking".concat(t),{value:null,validationType:"empty"}),(0,c.Z)(e,"lastName".concat(t),{value:null,validationType:"empty"}),(0,c.Z)(e,"Orcid".concat(t),{value:null,validationType:"empty"}),(0,c.Z)(e,"Titulo".concat(t),{value:null,validationType:"empty"}),(0,c.Z)(e,"Email".concat(t),{value:null,validationType:"empty"}),(0,c.Z)(e,"pais".concat(t),{value:null,validationType:"empty"}),e)),F(n),H(t)}}()}})})]}),(0,k.jsxs)("div",{className:"entry_left",children:[(0,k.jsxs)("div",{className:"textArea-createArticle",children:[(0,k.jsxs)("div",{className:"minititle",children:[(0,k.jsx)("div",{children:"Resumen"}),(0,k.jsxs)("div",{children:[T,"/500"]})]}),(0,k.jsx)(A,{className:"editor",value:K,id:"resume",onTextChange:function(e){U(e.htmlValue)},style:{height:"300px"}})]}),(0,k.jsxs)("div",{className:"textArea-createArticle",children:[(0,k.jsx)("div",{className:"minititle",children:(0,k.jsx)("div",{children:"Conflicto de inter\xe9s"})}),(0,k.jsx)(A,{className:"editor",value:G,id:"interesConflict",onTextChange:function(e){X(e.htmlValue)},style:{height:"150px"}})]}),(0,k.jsxs)("div",{className:"textArea-createArticle",children:[(0,k.jsx)("div",{className:"minititle",children:(0,k.jsx)("div",{children:"Referencias"})}),(0,k.jsx)(A,{value:te,className:"editor",id:"reference",onTextChange:function(e){ne(e.htmlValue)},style:{height:"150px"}})]})]})]})]})})})}}}]);
//# sourceMappingURL=282.b54aab1d.chunk.js.map