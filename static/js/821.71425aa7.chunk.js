(self.webpackChunktemachtiani=self.webpackChunktemachtiani||[]).push([[821],{27619:function(e,t,a){"use strict";a.d(t,{Qo:function(){return m},if:function(){return d},oN:function(){return A}});var n=a(74165),r=a(15861),c=a(31243),i=a(53439),s=a(89704),o=a.n(s),u="https://api.revistatemachtiani.net",l="C4CF1629D81577CF",d=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/registers?filters[email][$eq]=").concat(t)).then((function(e){if(0!=e.data.data.length){(0,i.Wi)("Email valido");var c=function(){var c=(0,r.Z)((0,n.Z)().mark((function r(){var c;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(t);case 2:if(!n.sent){n.next=6;break}g(e.data.data,t,a,e.data.data[0].id),n.next=8;break;case 6:c=f(),p(t,c,a,e.data.data[0].id);case 8:case"end":return n.stop()}}),r)})));return function(){return c.apply(this,arguments)}}();c()}else(0,i.zR)("Email invalido")})).catch((function(){(0,i.zR)("Email invalido")}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),f=function(){return Math.floor(9e4*Math.random())+1e4},p=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,a,r,i){var s,o,l,d,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return s=e.sent,console.log("idUsers",s),o={data:{email:t,code:a}},e.next=7,c.Z.post("".concat(u,"/api/verify-codes"),o);case 7:h(t,"Este es un c\xf3digo de verificaci\xf3n de temachtiani",a),l=m(a),d=m(i),f=m(s),l=l.replace(/\//g,"_"),d=d.replace(/\//g,"_"),f=f.replace(/\//g,"_"),r("/verification-code/".concat(l,"/").concat(d,"/").concat(f));case 15:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("".concat(u,"/api/verify-codes?filters[email][$eq]=").concat(t));case 3:if(0==(a=e.sent).data.data.length){e.next=9;break}return console.log("true",a.data.data),e.abrupt("return",!0);case 9:return console.log("false",a.data.data),e.abrupt("return",!1);case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.log("error en find email",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,a,r){var i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof r){e.next=8;break}return i=r.toString(),s={to:t,subject:a,text:i},console.log("codestring",i),e.next=6,c.Z.post("".concat(u,"/api/email"),s).then((function(e){console.log("entro")})).catch((function(e){console.log("fallo")}));case 6:e.next=8;break;case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,a,r,i){var s,o,d,p,v,g,A;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/verify-codes?filters[email][$eq]=").concat(a));case 2:return s=e.sent,e.next=5,x(a);case 5:return o=e.sent,console.log("idUsers",o),d=f(),p={data:{code:d}},e.next=11,c.Z.put("".concat(u,"/api/verify-codes/").concat(s.data.data[0].id),p);case 11:h(a,"Este es un c\xf3digo de verificaci\xf3n de temachtiani",d),console.log("newCode",d.toString()),console.log("key",l),v=(v=m(d)).replace(/\//g,"_"),g=(g=m(i)).replace(/\//g,"_"),A=(A=m(o)).replace(/\//g,"_"),r("/verification-code/".concat(v,"/").concat(g,"/").concat(A));case 21:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),m=function(e){return o().AES.encrypt(e.toString(),l).toString()},A=function(e){return o().AES.decrypt(e,l,{iv:o().enc.Hex.parse("a0d5ebe6a0d5ebe6a0d5ebe6a0d5ebe6")}).toString(o().enc.Utf8)},x=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/users?filters[email][$eq]=").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data[0].id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},40668:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(29439),r=(a(33849),a(53677)),c=a(1063),i=a(12653),s=a(66571),o=a(11087),u=a(72791),l=a(74165),d=a(15861),f=a(31243),p=a(27619),v=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.get("".concat("https://api.revistatemachtiani.net","/api/articles")).then((function(e){var a=[];e.data.data.map((function(e,t){var n=new Date(e.attributes.createdAt),r=(0,p.Qo)(e.id);r=r.replace(/\//g,"_"),a.push({id:r,title:e.attributes.dataArticle.name,resume:e.attributes.dataArticle.resume,createdat:n.toLocaleDateString(),estatus:0==e.attributes.dataArticle.estatus?"Enviado":1==e.attributes.dataArticle.estatus?"En espera":2==e.attributes.dataArticle.estatus?"Revisando normas":3==e.attributes.dataArticle.estatus?"Aprobado":4==e.attributes.dataArticle.estatus?"Publicado":""})})),t(a)})).catch((function(e){console.log("res",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=a(80184),g=function(){var e=(0,u.useState)(),t=(0,n.Z)(e,2),a=t[0],l=t[1];return(0,u.useEffect)((function(){v(l)}),[]),console.log("data",a),(0,h.jsx)("div",{className:"TableArticles",children:(0,h.jsx)(i.Z,{children:(0,h.jsxs)("div",{className:"containerr",children:[(0,h.jsx)(s.h4,{title:"Mis art\xedculos",button:"Enviar nuevo art\xedculo",url:"/user/article-create"}),(0,h.jsxs)(r.w,{value:a,stripedRows:!0,tableStyle:{minWidth:"30rem"},children:[(0,h.jsx)(c.s,{field:"title",header:"T\xedtulo"}),(0,h.jsx)(c.s,{field:"createdat",header:"Fecha"}),(0,h.jsx)(c.s,{field:"estatus",header:"Estado"}),(0,h.jsx)(c.s,{field:"actions",header:"Acciones",body:function(e){var t=e.id;return(0,h.jsx)(o.OL,{to:"/user/my-article/".concat(t),children:(0,h.jsx)("div",{className:"actionTemplate",children:(0,h.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAABs0lEQVQ4je2SP2sUURTFf/cNw+wKY2UXUCGKWItYiLoW+8/ANPrExkaEKFaixE9goaCNKFpoIQQCG9BdDDOzVQI2Ev0EmkJBsNjdYrealX3XwhE2ySxYpsjp3j33nPvefQf2secgs4harXZGRG4C54HDefkHsKGqr7vd7qf/Mmw2mwedcy+Bazn/UUReqOpt4FzepsCKMeZWHMfDab2ZPlSr1ePOuc8i4gMt4Itz7q6q3gPOTrWuAoFzbrNerx8rNIyiKDTGvBeRdpIkV4ETqrrsed5D4NSO4SfTNL0CfADaURSFuwyzLHsMfE2SZAlQEfktIndU9WLBqsaApml6H/iWZdmjwicDByqVigegqqvAPODvdFPVFoC11ohISVV1l2EQBEvAXKlUem6t9Xq93lNgveB26/1+/4m11hsOh89UdW48Hj/4R2775XzBa8BP3/evl8vlX6PRaNE5twBgjFkLw/DVYDA45Pv+W1U9aoy5FMfxVqEhbIvNZRFpAW1V3TLG6GQymReRBf5G6l0QBIudTmc0rZ8Z7EajcVpVbwAXgCN5+TuwISJvkiTZnKXdxx7DH1VZpXD/F2+fAAAAAElFTkSuQmCC",className:"ImgView_"})})})}})]})]})})})}},42480:function(){}}]);
//# sourceMappingURL=821.71425aa7.chunk.js.map