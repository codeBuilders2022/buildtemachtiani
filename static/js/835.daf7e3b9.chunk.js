(self.webpackChunktemachtiani=self.webpackChunktemachtiani||[]).push([[835],{27619:function(e,t,n){"use strict";n.d(t,{Qo:function(){return m},if:function(){return d},oN:function(){return w}});var a=n(74165),r=n(15861),c=n(31243),o=n(53439),i=n(89704),s=n.n(i),u="https://api.revistatemachtiani.net",l="C4CF1629D81577CF",d=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/registers?filters[email][$eq]=").concat(t)).then((function(e){if(0!=e.data.data.length){(0,o.Wi)("Email valido");var c=function(){var c=(0,r.Z)((0,a.Z)().mark((function r(){var c;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v(t);case 2:if(!a.sent){a.next=6;break}g(e.data.data,t,n,e.data.data[0].id),a.next=8;break;case 6:c=f(),p(t,c,n,e.data.data[0].id);case 8:case"end":return a.stop()}}),r)})));return function(){return c.apply(this,arguments)}}();c()}else(0,o.zR)("Email invalido")})).catch((function(){(0,o.zR)("Email invalido")}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){return Math.floor(9e4*Math.random())+1e4},p=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n,r,o){var i,s,l,d,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return i=e.sent,console.log("idUsers",i),s={data:{email:t,code:n}},e.next=7,c.Z.post("".concat(u,"/api/verify-codes"),s);case 7:h(t,"Este es un c\xf3digo de verificaci\xf3n de temachtiani",n),l=m(n),d=m(o),f=m(i),l=l.replace(/\//g,"_"),d=d.replace(/\//g,"_"),f=f.replace(/\//g,"_"),r("/verification-code/".concat(l,"/").concat(d,"/").concat(f));case 15:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("".concat(u,"/api/verify-codes?filters[email][$eq]=").concat(t));case 3:if(0==(n=e.sent).data.data.length){e.next=9;break}return console.log("true",n.data.data),e.abrupt("return",!0);case 9:return console.log("false",n.data.data),e.abrupt("return",!1);case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.log("error en find email",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n,r){var o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof r){e.next=8;break}return o=r.toString(),i={to:t,subject:n,text:o},console.log("codestring",o),e.next=6,c.Z.post("".concat(u,"/api/email"),i).then((function(e){console.log("entro")})).catch((function(e){console.log("fallo")}));case 6:e.next=8;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t,n,r,o){var i,s,d,p,v,g,w;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/verify-codes?filters[email][$eq]=").concat(n));case 2:return i=e.sent,e.next=5,x(n);case 5:return s=e.sent,console.log("idUsers",s),d=f(),p={data:{code:d}},e.next=11,c.Z.put("".concat(u,"/api/verify-codes/").concat(i.data.data[0].id),p);case 11:h(n,"Este es un c\xf3digo de verificaci\xf3n de temachtiani",d),console.log("newCode",d.toString()),console.log("key",l),v=(v=m(d)).replace(/\//g,"_"),g=(g=m(o)).replace(/\//g,"_"),w=(w=m(s)).replace(/\//g,"_"),r("/verification-code/".concat(v,"/").concat(g,"/").concat(w));case 21:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),m=function(e){return s().AES.encrypt(e.toString(),l).toString()},w=function(e){return s().AES.decrypt(e,l,{iv:s().enc.Hex.parse("a0d5ebe6a0d5ebe6a0d5ebe6a0d5ebe6")}).toString(s().enc.Utf8)},x=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(u,"/api/users?filters[email][$eq]=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data[0].id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},71189:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n(29439),r=n(72791),c=(n(5876),n(19952)),o=n(66571),i=n(57689),s=n(39304),u=n(53439),l=n(74165),d=n(15861),f=n(31243),p=n(27619),v="https://api.revistatemachtiani.net",h=function(){var e=(0,d.Z)((0,l.Z)().mark((function e(t,n,a,r){var c,o,i,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(c=t).replace(/_/g,"/"),c=(0,p.oN)(c),o=(o=a).replace(/_/g,"/"),o=(0,p.oN)(o),i={data:{password:n.password.value}},s={password:n.password.value},e.next=10,f.Z.put("".concat(v,"/api/registers/").concat(c),i).then((function(e){console.log("registers",e)})).catch((function(){}));case 10:return e.next=12,f.Z.put("".concat(v,"/api/users/").concat(o),s).then((function(e){console.log("users",e),(0,u.Wi)("Credenciales actualizadas"),r("/")})).catch((function(){(0,u.zR)("Credenciales incorrectas")}));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),g=n(80184),m=function(e){e.setAuth;var t=(0,i.s0)(),n=(0,i.UO)(),l=n.id,d=n.idUser,f=(0,r.useState)({password:{value:null,validationType:"email"},confirmPassword:{value:null,validationType:"email"}}),p=(0,a.Z)(f,2),v=p[0],m=p[1];(0,r.useEffect)((function(){for(var e in v)document.getElementById(e)&&(0,s.yt)(e,v)}),[v]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"NewPassword",children:(0,g.jsxs)(c.Z,{title:"Actualiza tus accesos",subTitle:"Ingresa la nueva contrase\xf1a",logo:!0,children:[(0,g.jsxs)("div",{className:"inputs-container",children:[(0,g.jsx)(o.CM,{title:"Contrase\xf1a",placeholder:"Contrase\xf1a",id:"password",onChange:function(e){(0,s.yS)(e,"password",v,m)}}),(0,g.jsx)(o.CM,{title:"Confirmar contrase\xf1a",placeholder:"Confirmar contrase\xf1a",id:"confirmPassword",onChange:function(e){(0,s.yS)(e,"confirmPassword",v,m)}})]}),(0,g.jsx)(o.zx,{className:"btn_primary",title:"Iniciar sesi\xf3n",onClick:function(){(0,s.DD)(v,m),v.password.value==v.confirmPassword.value&&v.password.value?(0,s.JG)(v.confirmPassword.value)?h(l,v,d,t):(0,u.zR)("La contrase\xf1a debe contener al menos un d\xedgito, una letra may\xfascula y un car\xe1cter especial, y tener al menos 8 caracteres.",!0):(0,u.zR)("Las contrase\xf1as no coinciden",!0)}})]})})})}},42480:function(){}}]);
//# sourceMappingURL=835.daf7e3b9.chunk.js.map